<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIS - Twoja Podróż</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Helvetica', sans-serif;
        }

        body {
            line-height: 1.6;
            color: #1a2b3c;
            background: #e6eef7;
        }

        header {
            background: #ffffff;
            padding: 1.5rem 3rem;
            box-shadow: 0 1px 6px rgba(0, 0, 0, 0.1);
            position: fixed;
            width: 100%;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 2.5rem;
            font-weight: 700;
            color: #1e4a8a;
            text-align: center;
            flex-grow: 1;
        }

        nav {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        nav a {
            color: #1a2b3c;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s;
        }

        nav a:hover {
            color: #ff6f61;
        }

        .dropdown {
            position: relative;
            cursor: pointer;
            padding: 0.5rem 1rem;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background: #fff;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border-radius: 4px;
            min-width: 200px;
            z-index: 1001;
            max-height: 300px;
            overflow-y: auto;
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        .dropdown-content div {
            padding: 0.5rem 1rem;
            color: #1a2b3c;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .dropdown-content div:hover {
            background: #f0f6fa;
        }

        .main-content {
            padding-top: 120px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: calc(100vh - 120px);
            background: #e6eef7;
        }

        .search-container {
            background: #ffffff;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 800px;
        }

        .search-form {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .search-form div {
            display: flex;
            flex-direction: column;
        }

        .search-form label {
            font-size: 0.9rem;
            color: #1a2b3c;
            margin-bottom: 0.3rem;
        }

        .search-form .dropdown-select {
            padding: 0.6rem;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
        }

        .calendar {
            padding: 0.6rem;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1002;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: #fff;
            padding: 1.5rem;
            border-radius: 10px;
            width: 350px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            text-align: center;
        }

        .modal-content .calendar-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .modal-content .calendar-header button {
            background: none;
            border: none;
            font-size: 1rem;
            cursor: pointer;
            color: #1e4a8a;
        }

        .modal-content .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.2rem;
            margin-top: 0.5rem;
        }

        .modal-content .calendar-day {
            padding: 0.5rem;
            cursor: pointer;
            border-radius: 4px;
        }

        .modal-content .calendar-day:hover {
            background: #f0f6fa;
        }

        .modal-content ul {
            list-style: none;
        }

        .modal-content ul li {
            padding: 0.5rem 1rem;
            cursor: pointer;
        }

        .modal-content ul li:hover {
            background: #f0f6fa;
        }

        .passengers-modal {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            padding: 2rem;
            width: 600px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .passengers-modal h3 {
            color: #1e4a8a;
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            font-weight: 700;
        }

        .passengers-modal .class-options {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin-bottom: 1.5rem;
            gap: 1.5rem;
        }

        .passengers-modal .class-options label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: #fff;
            padding: 1.2rem 1.8rem;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            width: 20%;
            justify-content: center;
            text-align: center;
            font-size: 1rem;
        }

        .passengers-modal .class-options label:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .passengers-modal .passenger-controls {
            background: #fff;
            padding: 1.8rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }

        .passengers-modal .passenger-controls div {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.2rem;
            border-bottom: 1px solid #eee;
            font-size: 1.1rem;
        }

        .passengers-modal .passenger-controls div:last-child {
            border-bottom: none;
        }

        .passengers-modal .passenger-controls button {
            background: #1e4a8a;
            color: #fff;
            border: none;
            padding: 0.5rem 1.2rem;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
            font-size: 1.1rem;
        }

        .passengers-modal .passenger-controls button:hover {
            background: #163a6a;
        }

        .passengers-modal .confirm-btn {
            background: linear-gradient(90deg, #ff6f61, #ff8a80);
            color: #fff;
            border: none;
            padding: 1.2rem 3rem;
            border-radius: 8px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            width: 100%;
        }

        .passengers-modal .confirm-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 111, 97, 0.3);
        }

        .search-btn {
            grid-column: 1 / 4;
            background: #ff6f61;
            color: white;
            border: none;
            padding: 0.8rem;
            border-radius: 6px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background 0.3s;
        }

        .search-btn:hover {
            background: #e65b50;
        }

        .options {
            display: flex;
            justify-content: space-between;
            margin-top: 1rem;
            font-size: 0.9rem;
            color: #1a2b3c;
        }

        .options a {
            color: #1e4a8a;
            text-decoration: none;
        }

        .options a:hover {
            text-decoration: underline;
        }

        .additional-options {
            display: flex;
            justify-content: space-between;
            margin-top: 1.5rem;
            font-size: 0.9rem;
            color: #1a2b3c;
        }

        .additional-options a {
            color: #1e4a8a;
            text-decoration: none;
        }

        .additional-options a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            header {
                padding: 1rem;
                flex-direction: column;
                gap: 1rem;
            }

            .logo {
                font-size: 2rem;
            }

            nav {
                flex-direction: column;
                gap: 1rem;
            }

            .search-form {
                grid-template-columns: 1fr;
            }

            .search-btn {
                grid-column: 1;
            }

            .modal-content {
                width: 90%;
            }

            .passengers-modal {
                width: 90%;
                padding: 1.5rem;
            }

            .passengers-modal .class-options {
                flex-direction: column;
                gap: 1rem;
            }

            .passengers-modal .class-options label {
                width: 100%;
                padding: 1rem;
                font-size: 1rem;
            }

            .passengers-modal .passenger-controls div {
                padding: 1rem;
                font-size: 1rem;
            }

            .passengers-modal .passenger-controls button {
                padding: 0.4rem 1rem;
                font-size: 1rem;
            }

            .passengers-modal .confirm-btn {
                padding: 1rem 2rem;
                font-size: 1.1rem;
            }

            .additional-options {
                flex-direction: column;
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <a href="#book">Zarezerwuj lot</a>
            <a href="#checkin">Odpraw się</a>
            <a href="#manage">Zarządzaj rezerwacją</a>
        </nav>
        <div class="logo">VIS</div>
        <nav>
            <div class="dropdown">
                <span>Waluta</span>
                <div class="dropdown-content">
                    <div>🇵🇱 PLN - Polska</div>
                    <div>🇺🇸 USD - USA</div>
                    <div>🇪🇺 EUR - Euro</div>
                </div>
            </div>
            <div class="dropdown">
                <span>Język</span>
                <div class="dropdown-content">
                    <div>🇵🇱 PL - Polski</div>
                    <div>🇬🇧 EN - English</div>
                    <div>🇩🇪 DE - Deutsch</div>
                </div>
            </div>
            <div class="dropdown">
                <span class="account-icon">👤</span>
                <div class="dropdown-content">
                    <a href="#login">Zaloguj się</a>
                    <a href="#register">Zarejestruj się</a>
                </div>
            </div>
        </nav>
    </header>

    <div class="main-content">
        <div class="search-container">
            <form class="search-form" id="search-form">
                <div>
                    <label for="origin">Skąd</label>
                    <div class="dropdown-select" id="origin-select" name="origin">Wybierz lotnisko</div>
                </div>
                <div>
                    <label for="destination">Dokąd</label>
                    <div class="dropdown-select" id="destination-select" name="destination">Wybierz lotnisko</div>
                </div>
                <div>
                    <label>Wylot</label>
                    <div class="calendar" id="departure-calendar" name="departure">Wybierz datę</div>
                </div>
                <div id="return-div" style="display: none;">
                    <label>Powrót</label>
                    <div class="calendar" id="return-calendar" name="return">Wybierz datę (opcjonalne)</div>
                </div>
                <div>
                    <label>Pasażerowie i klasa</label>
                    <div class="dropdown-select" id="passengers-class" name="passengers">1 Pasażer, Ekonomiczna</div>
                </div>
                <div style="grid-column: 1 / 4; display: flex; gap: 1rem;">
                    <label><input type="radio" name="trip-type" value="one-way" checked onchange="toggleReturn()"> Lot w jedną stronę</label>
                    <label><input type="radio" name="trip-type" value="round-trip" onchange="toggleReturn()"> Lot w obie strony</label>
                </div>
                <button type="submit" class="search-btn">Szukaj</button>
            </form>
            <div class="additional-options">
                <a href="#">Mam kod promocyjny</a>
                <a href="#">Mam kartę Dużej Rodziny</a>
                <a href="#">Oferty specjalne</a>
                <span>Rezerwacja bez opłat!</span>
            </div>
        </div>
    </div>

    <div class="modal" id="origin-modal">
        <div class="modal-content">
            <h3>Wybierz lotnisko - Skąd</h3>
            <ul id="origin-modal-list">
                <li data-value="Poland"><strong>Polska</strong></li>
                <li data-value="Warszawa-Chopina">Warszawa - Chopin (WAW)</li>
                <li data-value="Warszawa-Modlin">Warszawa - Modlin (WMI)</li>
                <li data-value="Kraków-Balice">Kraków - Balice (KRK)</li>
                <li data-value="Gdańsk-Rębiechowo">Gdańsk - Lech Wałęsa (GDN)</li>
                <li data-value="Wrocław-Strachowice">Wrocław - Copernicus (WRO)</li>
                <li data-value="Katowice-Pyrzowice">Katowice - Pyrzowice (KTW)</li>
                <li data-value="Poznań-Ławica">Poznań - Ławica (POZ)</li>
                <li data-value="Łódź-Lublinek">Łódź - Lublinek (LCJ)</li>
                <li data-value="Rzeszów-Jasionka">Rzeszów - Jasionka (RZE)</li>
                <li data-value="Szczecin-Goleniów">Szczecin - Goleniów (SZZ)</li>
                <li data-value="Bydgoszcz-Szwederowo">Bydgoszcz - Szwederowo (BZG)</li>
                <li data-value="Zielona Góra-Babimost">Zielona Góra - Babimost (IEG)</li>
                <li data-value="Lublin-Świdnik">Lublin - Świdnik (LUZ)</li>
                <li data-value="Olsztyn-Mazury">Olsztyn - Mazury (SZY)</li>
                <li data-value="Radom">Radom (RDO)</li>
                <li data-value="Centralny Port Komunikacyjny">Centralny Port Komunikacyjny</li>
                <li data-value="Germany"><strong>Niemcy</strong></li>
                <li data-value="Berlin-Tegel">Berlin - Tegel (TXL)</li>
                <li data-value="Berlin-Schönefeld">Berlin - Schönefeld (SXF)</li>
                <li data-value="Frankfurt nad Menem">Frankfurt nad Menem (FRA)</li>
                <li data-value="Monachium">Monachium (MUC)</li>
                <li data-value="Düsseldorf">Düsseldorf (DUS)</li>
                <li data-value="Hamburg">Hamburg (HAM)</li>
                <li data-value="Kolonia/Bonn">Kolonia/Bonn (CGN)</li>
                <li data-value="Stuttgart">Stuttgart (STR)</li>
                <li data-value="Hanower">Hanower (HAJ)</li>
                <li data-value="Dortmund">Dortmund (DTM)</li>
                <li data-value="Brema">Brema (BRE)</li>
                <li data-value="Lipsk/Halle">Lipsk/Halle (LEJ)</li>
                <li data-value="Norymberga">Norymberga (NUE)</li>
                <li data-value="France"><strong>Francja</strong></li>
                <li data-value="Paryż-Charles de Gaulle">Paryż - Charles de Gaulle (CDG)</li>
                <li data-value="Paryż-Orly">Paryż - Orly (ORY)</li>
                <li data-value="Nicea-Lazurowe Wybrzeże">Nicea - Lazurowe Wybrzeże (NCE)</li>
                <li data-value="Lyon-Saint-Exupéry">Lyon - Saint-Exupéry (LYS)</li>
                <li data-value="Marsylia-Prowansja">Marsylia - Prowansja (MRS)</li>
                <li data-value="Tuluza-Blagnac">Tuluza - Blagnac (TLS)</li>
                <li data-value="Bordeaux-Mérignac">Bordeaux - Mérignac (BOD)</li>
                <li data-value="Nantes-Atlantique">Nantes - Atlantique (NTE)</li>
                <li data-value="Strasburg-Entzheim">Strasburg - Entzheim (SXB)</li>
                <li data-value="Lille-Lesquin">Lille - Lesquin (LIL)</li>
            </ul>
        </div>
    </div>

    <div class="modal" id="destination-modal">
        <div class="modal-content">
            <h3>Wybierz lotnisko - Dokąd</h3>
            <ul id="destination-modal-list">
                <li data-value="Poland"><strong>Polska</strong></li>
                <li data-value="Warszawa-Chopina">Warszawa - Chopin (WAW)</li>
                <li data-value="Warszawa-Modlin">Warszawa - Modlin (WMI)</li>
                <li data-value="Kraków-Balice">Kraków - Balice (KRK)</li>
                <li data-value="Gdańsk-Rębiechowo">Gdańsk - Lech Wałęsa (GDN)</li>
                <li data-value="Wrocław-Strachowice">Wrocław - Copernicus (WRO)</li>
                <li data-value="Katowice-Pyrzowice">Katowice - Pyrzowice (KTW)</li>
                <li data-value="Poznań-Ławica">Poznań - Ławica (POZ)</li>
                <li data-value="Łódź-Lublinek">Łódź - Lublinek (LCJ)</li>
                <li data-value="Rzeszów-Jasionka">Rzeszów - Jasionka (RZE)</li>
                <li data-value="Szczecin-Goleniów">Szczecin - Goleniów (SZZ)</li>
                <li data-value="Bydgoszcz-Szwederowo">Bydgoszcz - Szwederowo (BZG)</li>
                <li data-value="Zielona Góra-Babimost">Zielona Góra - Babimost (IEG)</li>
                <li data-value="Lublin-Świdnik">Lublin - Świdnik (LUZ)</li>
                <li data-value="Olsztyn-Mazury">Olsztyn - Mazury (SZY)</li>
                <li data-value="Radom">Radom (RDO)</li>
                <li data-value="Centralny Port Komunikacyjny">Centralny Port Komunikacyjny</li>
                <li data-value="Germany"><strong>Niemcy</strong></li>
                <li data-value="Berlin-Tegel">Berlin - Tegel (TXL)</li>
                <li data-value="Berlin-Schönefeld">Berlin - Schönefeld (SXF)</li>
                <li data-value="Frankfurt nad Menem">Frankfurt nad Menem (FRA)</li>
                <li data-value="Monachium">Monachium (MUC)</li>
                <li data-value="Düsseldorf">Düsseldorf (DUS)</li>
                <li data-value="Hamburg">Hamburg (HAM)</li>
                <li data-value="Kolonia/Bonn">Kolonia/Bonn (CGN)</li>
                <li data-value="Stuttgart">Stuttgart (STR)</li>
                <li data-value="Hanower">Hanower (HAJ)</li>
                <li data-value="Dortmund">Dortmund (DTM)</li>
                <li data-value="Brema">Brema (BRE)</li>
                <li data-value="Lipsk/Halle">Lipsk/Halle (LEJ)</li>
                <li data-value="Norymberga">Norymberga (NUE)</li>
                <li data-value="France"><strong>Francja</strong></li>
                <li data-value="Paryż-Charles de Gaulle">Paryż - Charles de Gaulle (CDG)</li>
                <li data-value="Paryż-Orly">Paryż - Orly (ORY)</li>
                <li data-value="Nicea-Lazurowe Wybrzeże">Nicea - Lazurowe Wybrzeże (NCE)</li>
                <li data-value="Lyon-Saint-Exupéry">Lyon - Saint-Exupéry (LYS)</li>
                <li data-value="Marsylia-Prowansja">Marsylia - Prowansja (MRS)</li>
                <li data-value="Tuluza-Blagnac">Tuluza - Blagnac (TLS)</li>
                <li data-value="Bordeaux-Mérignac">Bordeaux - Mérignac (BOD)</li>
                <li data-value="Nantes-Atlantique">Nantes - Atlantique (NTE)</li>
                <li data-value="Strasburg-Entzheim">Strasburg - Entzheim (SXB)</li>
                <li data-value="Lille-Lesquin">Lille - Lesquin (LIL)</li>
            </ul>
        </div>
    </div>

    <div class="modal" id="departure-modal">
        <div class="modal-content">
            <div class="calendar-header">
                <button id="prev-month-departure"><</button>
                <span id="current-month-departure"></span>
                <button id="next-month-departure">></button>
            </div>
            <div class="calendar-grid" id="departure-calendar-grid"></div>
        </div>
    </div>

    <div class="modal" id="return-modal">
        <div class="modal-content">
            <div class="calendar-header">
                <button id="prev-month-return"><</button>
                <span id="current-month-return"></span>
                <button id="next-month-return">></button>
            </div>
            <div class="calendar-grid" id="return-calendar-grid"></div>
        </div>
    </div>

    <div class="modal" id="passengers-modal">
        <div class="passengers-modal">
            <h3>Pasażerowie i klasa podróży</h3>
            <div class="class-options">
                <label><input type="radio" name="class" value="economy" checked> Ekonomiczna</label>
                <label><input type="radio" name="class" value="premium"> Ekonomia Premium</label>
                <label><input type="radio" name="class" value="business"> Biznes</label>
                <label><input type="radio" name="class" value="first"> Pierwsza</label>
            </div>
            <div class="passenger-controls">
                <div>
                    <span>Dorośli (16+ lat)</span>
                    <button type="button" onclick="changePassenger('adult', -1)">-</button>
                    <span id="adult-count">1</span>
                    <button type="button" onclick="changePassenger('adult', 1)">+</button>
                </div>
                <div>
                    <span>Dzieci (2-15 lat)</span>
                    <button type="button" onclick="changePassenger('child', -1)">-</button>
                    <span id="child-count">0</span>
                    <button type="button" onclick="changePassenger('child', 1)">+</button>
                </div>
                <div>
                    <span>Niemowlęta (0-24 miesiące)</span>
                    <button type="button" onclick="changePassenger('infant', -1)">-</button>
                    <span id="infant-count">0</span>
                    <button type="button" onclick="changePassenger('infant', 1)">+</button>
                </div>
            </div>
            <button type="button" class="confirm-btn" onclick="updatePassengers()">Potwierdź</button>
        </div>
    </div>

    <script>
        // Modal dla lotnisk
        const originSelect = document.getElementById('origin-select');
        const originModal = document.getElementById('origin-modal');
        const originModalList = document.getElementById('origin-modal-list');
        const destinationSelect = document.getElementById('destination-select');
        const destinationModal = document.getElementById('destination-modal');
        const destinationModalList = document.getElementById('destination-modal-list');

        originSelect.addEventListener('click', () => {
            originModal.style.display = 'flex';
            destinationModal.style.display = 'none';
        });

        destinationSelect.addEventListener('click', () => {
            destinationModal.style.display = 'flex';
            originModal.style.display = 'none';
        });

        document.querySelectorAll('.modal-content ul li').forEach(li => {
            li.addEventListener('click', () => {
                const value = li.dataset.value;
                if (li.parentElement.id === 'origin-modal-list') {
                    originSelect.textContent = value;
                    originSelect.dataset.value = value;
                    originModal.style.display = 'none';
                } else {
                    destinationSelect.textContent = value;
                    destinationSelect.dataset.value = value;
                    destinationModal.style.display = 'none';
                }
            });
        });

        document.addEventListener('click', (e) => {
            if (!originSelect.contains(e.target) && !originModal.contains(e.target)) {
                originModal.style.display = 'none';
            }
            if (!destinationSelect.contains(e.target) && !destinationModal.contains(e.target)) {
                destinationModal.style.display = 'none';
            }
        });

        // Kalendarz
        let currentDate = new Date();
        currentDate.setHours(0, 0, 0, 0);
        const today = new Date();
        const maxDate = new Date(today);
        maxDate.setFullYear(maxDate.getFullYear() + 1); // Do 17 lipca 2026
        const months = ['Styczeń', 'Luty', 'Marzec', 'Kwiecień', 'Maj', 'Czerwiec', 'Lipiec', 'Sierpień', 'Wrzesień', 'Październik', 'Listopad', 'Grudzień'];
        const days = ['Pn', 'Wt', 'Śr', 'Cz', 'Pt', 'So', 'Nd'];

        function renderCalendar(date, gridId, monthId, prevId, nextId) {
            const year = date.getFullYear();
            const month = date.getMonth();
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);

            document.getElementById(monthId).textContent = `${months[month]} ${year}`;
            const grid = document.getElementById(gridId);
            grid.innerHTML = '';

            days.forEach(day => {
                const dayElement = document.createElement('div');
                dayElement.textContent = day;
                dayElement.className = 'calendar-day';
                grid.appendChild(dayElement);
            });

            for (let i = 0; i < firstDay.getDay() - 1; i++) {
                const empty = document.createElement('div');
                grid.appendChild(empty);
            }

            for (let day = 1; day <= lastDay.getDate(); day++) {
                const dayElement = document.createElement('div');
                dayElement.textContent = day;
                const current = new Date(year, month, day);
                dayElement.className = 'calendar-day';
                if (current < today) {
                    dayElement.style.color = '#ccc';
                } else if (current > maxDate) {
                    dayElement.style.color = '#ccc';
                } else {
                    dayElement.addEventListener('click', () => {
                        const calendar = document.getElementById(gridId === 'departure-calendar-grid' ? 'departure-calendar' : 'return-calendar');
                        calendar.textContent = `${day} ${months[month]} ${year}`;
                        calendar.dataset.value = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                        document.getElementById(gridId === 'departure-calendar-grid' ? 'departure-modal' : 'return-modal').style.display = 'none';
                    });
                }
                grid.appendChild(dayElement);
            }
        }

        document.getElementById('departure-calendar').addEventListener('click', () => {
            const modal = document.getElementById('departure-modal');
            modal.style.display = 'flex';
            renderCalendar(currentDate, 'departure-calendar-grid', 'current-month-departure', 'prev-month-departure', 'next-month-departure');
        });

        document.getElementById('return-calendar').addEventListener('click', () => {
            const modal = document.getElementById('return-modal');
            modal.style.display = 'flex';
            renderCalendar(currentDate, 'return-calendar-grid', 'current-month-return', 'prev-month-return', 'next-month-return');
        });

        document.getElementById('prev-month-departure').addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() - 1);
            if (currentDate < today) currentDate = new Date(today);
            renderCalendar(currentDate, 'departure-calendar-grid', 'current-month-departure', 'prev-month-departure', 'next-month-departure');
        });

        document.getElementById('next-month-departure').addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() + 1);
            if (currentDate > maxDate) currentDate = new Date(maxDate);
            renderCalendar(currentDate, 'departure-calendar-grid', 'current-month-departure', 'prev-month-departure', 'next-month-departure');
        });

        document.getElementById('prev-month-return').addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() - 1);
            if (currentDate < today) currentDate = new Date(today);
            renderCalendar(currentDate, 'return-calendar-grid', 'current-month-return', 'prev-month-return', 'next-month-return');
        });

        document.getElementById('next-month-return').addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() + 1);
            if (currentDate > maxDate) currentDate = new Date(maxDate);
            renderCalendar(currentDate, 'return-calendar-grid', 'current-month-return', 'prev-month-return', 'next-month-return');
        });

        document.addEventListener('click', (e) => {
            if (!document.getElementById('departure-calendar').contains(e.target) && !document.getElementById('departure-modal').contains(e.target)) {
                document.getElementById('departure-modal').style.display = 'none';
            }
            if (!document.getElementById('return-calendar').contains(e.target) && !document.getElementById('return-modal').contains(e.target)) {
                document.getElementById('return-modal').style.display = 'none';
            }
        });

        // Dynamiczne przełączanie Powrót
        function toggleReturn() {
            const returnDiv = document.getElementById('return-div');
            const tripType = document.querySelector('input[name="trip-type"]:checked').value;
            returnDiv.style.display = tripType === 'one-way' ? 'none' : 'block';
        }

        // Pasażerowie
        let adultCount = 1, childCount = 0, infantCount = 0;

        function changePassenger(type, delta) {
            if (type === 'adult') adultCount = Math.max(1, adultCount + delta);
            if (type === 'child') childCount = Math.max(0, childCount + delta);
            if (type === 'infant') infantCount = Math.max(0, infantCount + delta);
            updateCounts();
        }

        function updateCounts() {
            document.getElementById('adult-count').textContent = adultCount;
            document.getElementById('child-count').textContent = childCount;
            document.getElementById('infant-count').textContent = infantCount;
        }

        const passengersClass = document.getElementById('passengers-class');
        const passengersModal = document.getElementById('passengers-modal');

        passengersClass.addEventListener('click', () => {
            passengersModal.style.display = 'flex';
        });

        function updatePassengers() {
            const classType = document.querySelector('input[name="class"]:checked').value;
            passengersClass.textContent = `${adultCount} Pasażer(ów), ${classType.charAt(0).toUpperCase() + classType.slice(1)}`;
            passengersModal.style.display = 'none';
        }

        document.addEventListener('click', (e) => {
            if (!passengersClass.contains(e.target) && !passengersModal.contains(e.target)) {
                passengersModal.style.display = 'none';
            }
        });

        // Obsługa przesyłania formularza
        document.getElementById('search-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const form = e.target;
            const origin = document.getElementById('origin-select').dataset.value || 'Nie wybrano';
            const destination = document.getElementById('destination-select').dataset.value || 'Nie wybrano';
            const departure = document.getElementById('departure-calendar').dataset.value || 'Nie wybrano';
            const returnDate = document.getElementById('return-calendar').dataset.value || '';
            const passengers = document.getElementById('passengers-class').textContent || '1 Pasażer, Ekonomiczna';
            const tripType = document.querySelector('input[name="trip-type"]:checked').value || 'one-way';

            console.log('Form Data:', { origin, destination, departure, returnDate, passengers, tripType }); // Debug
            const params = new URLSearchParams({
                origin: origin,
                destination: destination,
                departure: departure,
                return: tripType === 'round-trip' ? returnDate : '',
                passengers: passengers,
                'trip-type': tripType
            });
            window.location.href = `rezultat.html?${params.toString()}`;
        });
    </script>
</body>
</html>
